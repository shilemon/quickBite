# ============================================================
# QuickBite Helm Chart — Base Values
# Override per environment with values-stg.yaml / values-prod.yaml
# ============================================================

# ── Frontend ─────────────────────────────────────────────────
frontend:
  enabled: true
  replicaCount: 1
  image:
    repository: emon110852/quickbite-frontend
    tag: latest   # frontend
    pullPolicy: Always
  service:
    type: ClusterIP
    port: 80
    targetPort: 80
  resources:
    requests:
      cpu: 100m
      memory: 128Mi
    limits:
      cpu: 300m
      memory: 256Mi
  hpa:
    enabled: false
    minReplicas: 1
    maxReplicas: 3
    targetCPUUtilizationPercentage: 70

# ── Admin ─────────────────────────────────────────────────────
admin:
  enabled: true
  replicaCount: 1
  image:
    repository: emon110852/quickbite-admin
    tag: latest   # admin
    pullPolicy: Always
  service:
    type: ClusterIP
    port: 80
    targetPort: 80
  resources:
    requests:
      cpu: 100m
      memory: 128Mi
    limits:
      cpu: 300m
      memory: 256Mi
  hpa:
    enabled: false
    minReplicas: 1
    maxReplicas: 3
    targetCPUUtilizationPercentage: 70

# ── Backend ───────────────────────────────────────────────────
backend:
  enabled: true
  replicaCount: 1
  image:
    repository: emon110852/quickbite-backend
    tag: latest   # backend
    pullPolicy: Always
  service:
    type: ClusterIP
    port: 4000
    targetPort: 4000
  resources:
    requests:
      cpu: 200m
      memory: 256Mi
    limits:
      cpu: 500m
      memory: 512Mi
  hpa:
    enabled: false
    minReplicas: 1
    maxReplicas: 5
    targetCPUUtilizationPercentage: 70

# ── MongoDB ───────────────────────────────────────────────────
mongodb:
  enabled: true
  image:
    repository: mongo
    tag: "7.0"
    pullPolicy: IfNotPresent
  service:
    type: ClusterIP
    port: 27017
  storage:
    size: 5Gi
    storageClass: gp2
  resources:
    requests:
      cpu: 200m
      memory: 256Mi
    limits:
      cpu: 500m
      memory: 512Mi
  # Database name — referenced in ConfigMap
  dbName: quickbite

# ── Ingress ───────────────────────────────────────────────────
ingress:
  enabled: true
  className: nginx
  annotations:
    nginx.ingress.kubernetes.io/use-regex: "true"
    nginx.ingress.kubernetes.io/proxy-body-size: "10m"
    nginx.ingress.kubernetes.io/proxy-connect-timeout: "60"
    nginx.ingress.kubernetes.io/proxy-send-timeout: "60"
    nginx.ingress.kubernetes.io/proxy-read-timeout: "60"

# ── ConfigMap (non-sensitive env vars) ───────────────────────
config:
  nodeEnv: "production"
  port: "4000"

# ── Secrets (sensitive — created manually via kubectl) ────────
# kubectl create secret generic quickbite-secrets \
#   --namespace <ns> \
#   --from-literal=MONGO_URI="mongodb://quickbite-mongodb:27017/quickbite" \
#   --from-literal=JWT_SECRET="your-secret" \
#   --from-literal=STRIPE_SECRET_KEY="sk_test_xxx"
secrets:
  name: quickbite-secrets